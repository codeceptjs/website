---
import type { Props } from '@astrojs/starlight/props';
import StarlightHead from '@astrojs/starlight/components/Head.astro';
import VtbotStarlight from 'astro-vtbot/components/starlight/Base.astro';
import type {
    Article,
    Organization,
    WebSite,
    WithContext
} from 'schema-dts';

const { title, description } = Astro.props.entry.data;

const website: WithContext<WebSite> = {
    '@context': 'https://schema.org',
    '@type': 'WebSite',
    '@id': Astro.props.id,
    description,
    image: {
        '@type': 'ImageObject',
        url: 'https://codecept.io/logo.svg'
    },
    inLanguage: Astro.props.lang,
    name: Astro.props.siteTitle,
    url: Astro.url.href,
    "sameAs": [
        "https://codecept.io/",
        "https://twitter.com/codeceptjs",
        "https://codeceptjs.slack.com/join/shared_invite/zt-1dkxkju78-9aThX6G2~iDkLwhuRsPVsg",
        "https://codecept.discourse.group/",
        "https://stackoverflow.com/questions/tagged/codeceptjs",
        "https://github.com/codeceptjs/CodeceptJS/discussions",
        "https://github.com/codeceptjs/CodeceptJS",
    ],
}

const organization: WithContext<Organization> = {
    '@context': 'https://schema.org',
    '@type': 'Organization',
    image: {
        '@type': 'ImageObject',
        url: 'https://codecept.io/logo.svg'
    },
    url: Astro.url.href,
    "sameAs": [
        "https://codecept.io/",
        "https://twitter.com/codeceptjs",
        "https://codeceptjs.slack.com/join/shared_invite/zt-1dkxkju78-9aThX6G2~iDkLwhuRsPVsg",
        "https://codecept.discourse.group/",
        "https://stackoverflow.com/questions/tagged/codeceptjs",
        "https://github.com/codeceptjs/CodeceptJS/discussions",
        "https://github.com/codeceptjs/CodeceptJS",
    ],
    logo: {
        '@type': 'ImageObject',
        url: 'https://codecept.io/logo.svg'
    },
    name: Astro.props.siteTitle,
    description,
    '@id': Astro.props.id,
}

const article: WithContext<Article> = {
    '@context': 'https://schema.org',
    '@type': 'Article',
    headline: title,
    description,
    url: Astro.url,
    image: {
        '@type': 'ImageObject',
        url: 'https://codecept.io/logo.svg'
    },
    inLanguage: Astro.props.lang,
}

---

<VtbotStarlight {...Astro.props}>
    <StarlightHead {...Astro.props}><slot /></StarlightHead>
</VtbotStarlight>

{
    [website, organization, article].map((data) =>
        <script is:inline set:html={JSON.stringify(data)} type='application/ld+json' />
    )
}